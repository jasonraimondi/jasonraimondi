{{ define "main" }}
<article class="post-container" itemscope itemtype="http://schema.org/BlogPosting">
    <header>
        <h1 itemprop="name headline">{{ .Title }}</h1>
        <time datetime="{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}">
        {{ .Date.Format "January 2, 2006" }}
        </time>
        â€¢
        <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Jason Raimondi</span></span>
    </header>
    <section id="post-content">
        <p>
            <span title="Lastmod: {{ .Lastmod.Format "January 2, 2006" }}. Published at: {{ .PublishDate.Format "2006-01-02" }}.">
            {{ if ne .Lastmod .PublishDate }}
            <span class="i">last modified</span> {{ dateFormat "January 2, 2006" .Lastmod }}
            {{ end }}
            </span>
        </p>
        <article class="use-pretty-links" itemprop="articleBody">
            {{ .Content }}
        </article>
    </section>
</article>

<script>
    const addHeaderDeepLinks = function() {
        const postDoc = document.getElementById('post-content');
        const elements = [
            postDoc.getElementsByTagName('h2'),
            postDoc.getElementsByTagName('h3'),
            postDoc.getElementsByTagName('h4'),
            postDoc.getElementsByTagName('h5'),
            postDoc.getElementsByTagName('h6'),
        ];
        for (let i = 0; i < elements.length; i++) {
            for (let k = 0; k < elements[i].length; k++) {
                const header = elements[i][k];
                const anchor = document.createElement('a');
                anchor.className = 'header-link mr-2 text-grey';
                anchor.href = '#' + header.id;
                anchor.innerHTML = '#';
                header.insertBefore(anchor, header.firstChild);
            }
        }
    };
    addHeaderDeepLinks();
</script>
{{ end }}